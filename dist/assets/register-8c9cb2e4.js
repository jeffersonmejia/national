import{l as b,s as p}from"./config-827b77a1.js";const k={dni:/^[0-9]{10}$/,fingerprint:/^[0-9]{10}$/,name:/^[A-Za-z]{3,16}\s{1}[A-Za-z]{3,16}$/,lastname:/^[A-Za-z]{3,16}\s{1}[A-Za-z]{3,16}$/,email:/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,password:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/,address:/.{8,16}/,decimal:/^[0-9]{1,4}\.?[0-9]{0,3}$/,salary:/^[0-9]{1,4}\.?[0-9]{0,3}$/,tel:/^09[0-9]{8}$/,date:/^.{10}$/},g=(e,t)=>k[t].test(e);function u(e,t,s){let o=g(e.value,e.name);return o?(t.classList.remove("error-active"),s!==void 0&&s.classList.remove("hidden")):(t.classList.add("error-active"),s!==void 0&&s.classList.add("hidden")),o}function w(e,t,s){g(e.value,e.name)?(t[e.name].classList.remove("visible"),s[e.name]=!0):(t[e.name].classList.add("visible"),s[e.name]=!1)}const z="http://",E="localhost",x="national",A={register:`${z}${E}/${x}/server/register.php`};function c(e,t){t?(e.disabled=!0,e.classList.add("btn-disabled")):(e.disabled=!1,e.classList.remove("btn-disabled"))}b();const r=document,C=r.querySelectorAll("input"),F=r.getElementById("fingerprint"),I=r.querySelector(".error__group__dni"),T=r.querySelector(".error__group__finger"),d={name:r.querySelector(".error__group__name"),lastname:r.querySelector(".error__group__lastname"),address:r.querySelector(".error__group__address"),tel:r.querySelector(".error__group__tel"),email:r.querySelector(".error__group__email"),password:r.querySelector(".error__group__password"),repeatPassword:r.querySelector(".error__group__repeat__password"),salary:r.querySelector(".error__group__salary"),date:r.querySelector(".error__group__date")},B=r.getElementById("submit"),_=r.getElementById("register-btn"),Z=r.querySelector(".advices-container"),h=r.querySelector(".register-form"),D=r.querySelector(".register-user-query"),y=r.querySelector(".register-user-data"),P=r.querySelector("main"),R=r.querySelector(".checked-container"),i=r.querySelector(".checked-container span"),f=r.querySelector(".checked-container small"),O=r.querySelector(".main-title"),U=r.querySelectorAll(".register-user-query input"),M=r.querySelectorAll(".register-user-data input"),$=r.querySelector(".modal-loader"),j=A.register,l={name:!1,lastname:!1,address:!1,password:!1,passwordRepeat:!1,email:!1,tel:!1,salary:!1},a={};function J(e){e.matches("#dni")&&u(e,I,F),e.matches("#fingerprint")&&u(e,T)&&(c(B,!1),U.forEach(t=>{a[t.name]=t.value}))}function N(e,t){e!=="repeat-password"?(w(t,d,l),e==="password"&&(a[e]=t.value)):a.password!==t.value?(d.repeatPassword.classList.add("visible"),l.passwordRepeat=!1):(d.repeatPassword.classList.remove("visible"),l.passwordRepeat=!0),V(l)}function V({name:e,lastname:t,address:s,email:o,salary:v,tel:S,password:q,passwordRepeat:L}){e&&t&&s&&o&&v&&S&&q&&L&&(c(_,!1),M.forEach(n=>{n.name!=="repeat-password"&&(a[n.name]=n.value)}))}async function G(e){try{p($,!0);let t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};const s=await fetch(j,t);if(!s.ok)throw{status:s.status,statusText:s.statusText};m(s.ok,"Registro éxitoso")}catch(t){m(t.ok,t.statusText||"Error interno")}}function m(e,t){h.classList.add("border-none"),y.classList.add("hidden"),R.classList.remove("hidden"),e?(i.classList.add("checked-btn-successful"),i.textContent="check",f.textContent=t):(p($,!1),i.classList.add("checked-btn-unsuccessful"),i.textContent="cancel",f.textContent=t+". Registro sin éxito"),setTimeout(()=>location.pathname="/national",1700)}r.addEventListener("keyup",e=>{e.target.parentElement.matches(".register-user-query")&&J(e.target),e.target.parentElement.matches(".group-input")&&N(e.target.name,e.target)});r.addEventListener("click",e=>{e.target.matches("button")&&e.preventDefault(),e.target.matches("#submit")&&(c(_,!0),P.classList.add("main-expanded"),Z.classList.add("hidden"),h.classList.add("register-form-expanded"),D.classList.add("hidden"),y.classList.remove("hidden"),O.classList.remove("hidden")),e.target.matches("#register-btn")&&G(a)});r.addEventListener("DOMContentLoaded",e=>{C.forEach(t=>t.value="")});
